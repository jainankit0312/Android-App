<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap
        PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
        "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="QueryMap">

	<select id="getProcesses" resultClass="java.util.LinkedHashMap"
		parameterClass="java.util.Map">
		select
				CAST(io_uuid AS varchar(100)) as xid  , io_name
		from
				io_business_process		
		order by
				io_created_on DESC
		OFFSET
				#startFrom#
		LIMIT
				#upto#
	</select>
	<select id="getProcessesByID" resultClass="java.util.LinkedHashMap"
		parameterClass="java.util.Map">
			select 
				CAST(bp.io_uuid AS varchar(100)) as "XID", 
				bp.io_name as "Name", 
				to_char(bp.io_created_on, 'DD MON YYYY') as "Creation Date" ,
				bp.io_description as "Description",
				usr.io_full_name as "Business Owner", 
				usr1.io_full_name as "Process Administrator"
				
				
		from 
				io_business_process as bp 
					LEFT OUTER JOIN io_user as usr 
							ON (usr.io_uuid = bp.io_business_owner)
					LEFT OUTER JOIN io_user as usr1 
							ON (usr1.io_uuid = bp.io_process_administrator)
					
		where
					
					bp.io_uuid = #id#::uuid
				
	</select>
</sqlMap>

